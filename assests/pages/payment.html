<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Form</title>
    <style>
        body {
            background-image: url("../images/payment_background.jpg");
            background-repeat: no-repeat;
            background-position: center;
            background-attachment: fixed;
            background-size: cover;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: #F9F9F9;
            gap: 30px;
            margin-top: 175px;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .col {
            flex: 1;
            margin-left: 50px;
        }

        .title {
            font-size: 20px;
            margin-bottom: 10px;
            color: #333;
        }

        .inputBox {
            margin-bottom: 15px;
            gap: 30px;
        }

        .inputBox span {
            display: block;
            margin-bottom: 5px;
            color: #555;
        }

        .inputBox input, .inputBox select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            gap: 30px;
        }

        .error-message {
            color: red;
            font-size: 12px;
            display: none;
        }

        .submit-btn {
            background-color:rgba(73, 163, 168, 0.8);
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 4px;
            margin-left: 370px;
        }

        .submit-btn:hover {
            background-color:  #ffc107;
        }

        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .modal-content {
            text-align: center;
        }

        .modal-header {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .btn-close {
            background-color: #ffc107;
            color: white;
            border: none;
            padding: 8px 16px;
            cursor: pointer;
            border-radius: 4px;
        }

        .btn-close:hover {
            background-color: #ffc107;
        }
    </style>
</head>
<body>
    <div class="container">
        <form id="payment-form">
            <div class="row">
                <div class="col">
                    <div class="inputBox">
                        <span>Full Name:</span>
                        <input type="text" id="full-name" placeholder="Enter your name">
                        <span id="full-name-error" class="error-message"></span>
                    </div>
                </div>
                <div class="col">
                    <div class="inputBox">
                        <span>Email:</span>
                        <input type="email" id="email" placeholder="Enter your email">
                        <span id="email-error" class="error-message"></span>
                    </div>
                </div>
            </div>

            <div class="inputBox">
                <span>Address:</span>
                <input type="text" id="address" placeholder="Enter your address">
                <span id="address-error" class="error-message"></span>
            </div>

            <div class="row">
                <div class="col">
                    <div class="inputBox">
                        <span>City:</span>
                        <input type="text" id="city" placeholder="Enter your city">
                        <span id="city-error" class="error-message"></span>
                    </div>
                </div>
                <div class="col">
                    <div class="inputBox">
                        <span>State:</span>
                        <input type="text" id="state" placeholder="Enter your state">
                        <span id="state-error" class="error-message"></span>
                    </div>
                </div>
                <div class="col">
                    <div class="inputBox">
                        <span>Zip Code:</span>
                        <input type="text" id="zip-code" placeholder="Enter your zip code">
                        <span id="zip-code-error" class="error-message"></span>
                    </div>
                </div>
            </div>

            <div class="inputBox">
                <span>Payment Method:</span>
                <select id="payment-method">
                    <option value="">Select</option>
                    <option value="card">Credit/Debit Card</option>
                    <option value="net-banking">Net Banking</option>
                    <option value="upi">UPI</option>
                </select>
                <span id="payment-method-error" class="error-message"></span>
            </div>

            <div id="card-info" style="display: none;">
                <div class="inputBox">
                    <span>Card Number:</span>
                    <input type="text" id="card-number" placeholder="Enter your card number">
                    <span id="card-number-error" class="error-message"></span>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="inputBox">
                            <span>Expiry Month:</span>
                            <input type="text" id="exp-month" placeholder="MM">
                            <span id="exp-month-error" class="error-message"></span>
                        </div>
                    </div>
                    <div class="col">
                        <div class="inputBox">
                            <span>Expiry Year:</span>
                            <input type="text" id="exp-year" placeholder="YYYY">
                            <span id="exp-year-error" class="error-message"></span>
                        </div>
                    </div>
                    <div class="col">
                        <div class="inputBox">
                            <span>CVV:</span>
                            <input type="text" id="cvv" placeholder="Enter CVV">
                            <span id="cvv-error" class="error-message"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="upi-info" style="display: none;">
                <div class="inputBox">
                    <span>UPI ID:</span>
                    <input type="text" id="upi-id" placeholder="Enter your UPI ID">
                    <span id="upi-id-error" class="error-message"></span>
                </div>
            </div>

            <button type="submit" class="submit-btn">Submit</button>
        </form>
    </div>

    <div id="confirmation-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Booking Successful!</div>
            <p>Your booking for <strong id="modal-package-name"></strong> has been confirmed.</p>
            <p><strong>Duration:</strong> <span id="modal-package-duration"></span></p>
            <p><strong>Total Price:</strong> <span id="modal-package-price"></span></p>
            <button class="btn-close" onclick="window.location.href='../pages/mybooking.html';">View My Bookings</button>
        </div>
    </div>
    <script>

document.addEventListener("DOMContentLoaded", () => {
    const paymentMethodSelect = document.getElementById("payment-method");
    const cardInfo = document.getElementById("card-info");
    const upiInfo = document.getElementById("upi-info");
    const form = document.getElementById("payment-form");
    const modal = document.getElementById("confirmation-modal");

    // Display booking summary if query parameters are present
    const urlParams = new URLSearchParams(window.location.search);
    const packageName = urlParams.get("name");
    const packageDuration = urlParams.get("duration");
    const packagePrice = urlParams.get("price");

    if (packageName && packageDuration && packagePrice) {
        const summaryDiv = document.createElement("div");
        summaryDiv.innerHTML = `
            <h3>Booking Summary</h3>
            <p><strong>Package Name:</strong> ${packageName}</p>
            <p><strong>Duration:</strong> ${packageDuration}</p>
            <p><strong>Total Price:</strong> ${packagePrice}</p>
        `;
        document.querySelector(".container").prepend(summaryDiv);
    }

    // Toggle payment method fields
    paymentMethodSelect.addEventListener("change", () => {
        const selectedMethod = paymentMethodSelect.value;
        cardInfo.style.display = selectedMethod === "card" ? "block" : "none";
        upiInfo.style.display = selectedMethod === "upi" ? "block" : "none";
    });

    // Handle form submission
    form.addEventListener("submit", (event) => {
        event.preventDefault();

        if (validateForm()) {
            // Populate modal with booking details
            document.getElementById("modal-package-name").textContent = packageName;
            document.getElementById("modal-package-duration").textContent = packageDuration;
            document.getElementById("modal-package-price").textContent = packagePrice;

            // Save user bookings
            const fullName = document.getElementById("full-name").value.trim();
            const email = document.getElementById("email").value.trim();

            // Ensure email is provided
            if (!email) {
                alert("Email is required to associate bookings with the user.");
                return;
            }

            const bookingDetails = {
                packageName,
                duration: packageDuration,
                totalPrice: packagePrice,
                date: new Date().toLocaleDateString(),
                user: fullName || email,
            };

            // Save bookings in localStorage
            let allBookings = JSON.parse(localStorage.getItem("userBookings")) || {};
            if (!allBookings[email]) {
                allBookings[email] = [];
            }
            allBookings[email].push(bookingDetails);
            localStorage.setItem("userBookings", JSON.stringify(allBookings));

            // Show confirmation modal
            modal.style.display = "block";

            // Redirect to "My Bookings" page
            setTimeout(() => {
                window.location.href = "../pages/mybooking.html";
            }, 2000);
        }
    });

    // Form validation
    function validateForm() {
        let isValid = true;

        // Full Name validation
        const fullName = document.getElementById("full-name");
        const fullNameError = document.getElementById("full-name-error");
        if (!fullName.value.trim()) {
            fullNameError.textContent = "Full Name is required.";
            fullNameError.style.display = "block";
            isValid = false;
        } else {
            fullNameError.style.display = "none";
        }

        // Email validation
        const email = document.getElementById("email");
        const emailError = document.getElementById("email-error");
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!email.value.trim() || !emailRegex.test(email.value)) {
            emailError.textContent = "Enter a valid email address.";
            emailError.style.display = "block";
            isValid = false;
        } else {
            emailError.style.display = "none";
        }

        // Payment method validation
        const paymentMethod = paymentMethodSelect.value;
        const paymentMethodError = document.getElementById("payment-method-error");
        if (!paymentMethod) {
            paymentMethodError.textContent = "Select a payment method.";
            paymentMethodError.style.display = "block";
            isValid = false;
        } else {
            paymentMethodError.style.display = "none";

            if (paymentMethod === "card") {
                const cardNumber = document.getElementById("card-number").value.trim();
                const cardNumberError = document.getElementById("card-number-error");
                if (!cardNumber || !/^\d{16}$/.test(cardNumber)) {
                    cardNumberError.textContent = "Enter a valid 16-digit card number.";
                    cardNumberError.style.display = "block";
                    isValid = false;
                } else {
                    cardNumberError.style.display = "none";
                }
            } else if (paymentMethod === "upi") {
                const upiId = document.getElementById("upi-id").value.trim();
                const upiIdError = document.getElementById("upi-id-error");
                if (!upiId || !/^\w+@\w+$/.test(upiId)) {
                    upiIdError.textContent = "Enter a valid UPI ID.";
                    upiIdError.style.display = "block";
                    isValid = false;
                } else {
                    upiIdError.style.display = "none";
                }
            }
        }

        return isValid;
    }
});

    </script>
</body>
</html>

